{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(q, currentPage) {\n  const url = 'https://pixabay.com/api/';\n  const params = {\n    key: '43096972-1afb589163252f275da428b1d',\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page: currentPage,\n  };\n\n  try {\n    const res = await axios.get(url, { params });\n    return res.data;\n  } catch (err) {\n    console.error('Error occurred while fetching images:', error);\n    throw error;\n  }\n}\n","export function renderImages(imagesArr) {\n  return imagesArr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"list-item\">\n     <a class=\"gallery-link\" href =\"${largeImageURL}\">\n     <img loading=\"lazy\" src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\"\n     </a>\n     \n      <ul class=\"information-list\">\n        <li class=\"item-information-container\">\n          <h2 class=\"main-info\">Likes </h2>\n            <p class=\"info\">${likes}</p>\n          \n        </li>\n        <li class=\"item-information-container\">\n          <h2 class=\"main-info\"> Views</h2>\n            <p class=\"info\">${views}</p>\n          \n        </li>\n        <li class=\"item-information-container\">\n          <h2 class=\"main-info\">Comments </h2>\n            <p class=\"info\">${comments}</p>\n          \n        </li>\n        <li class=\"item-information-container\">\n          <h2 class=\"main-info\">Downloads </h2>\n            <p class=\"info\">${downloads}</p>\n        </li>\n      </ul>\n   \n    </li>`;\n      }\n    )\n    .join('');\n}\n","import { getImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\nconst list = document.querySelector('.list');\nconst load = document.querySelector('.loading');\nconst btnLoad = document.querySelector('.button-more');\n\nform.addEventListener('submit', handleImages);\n\nfunction showLoadMore() {\n  btnLoad.classList.add('load-more');\n}\nfunction hideLoadMore() {\n  btnLoad.classList.remove('load-more');\n}\n\nfunction checkBtnStatus() {\n  if (page >= maxPage) {\n    hideLoadMore();\n  } else {\n    showLoadMore();\n  }\n}\n\nlet input;\nlet page = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n\nasync function handleImages(e) {\n  e.preventDefault();\n\n  input = e.target.elements.search.value.trim();\n  if (input === '') {\n    load.classList.remove('loader');\n    iziToast.error({\n      backgroundColor: 'lightred',\n      icon: false,\n      progressBar: false,\n      close: false,\n      position: 'topRight',\n      message: 'Please, fill the field!',\n    });\n\n    return;\n  }\n\n  list.innerHTML = '';\n  let page = 1;\n\n  load.classList.add('loader');\n  try {\n    const value = await getImages(input, page);\n\n    if (value.hits && value.hits.length === 0) {\n      iziToast.error({\n        backgroundColor: 'red',\n        progressBar: false,\n        close: false,\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    maxPage = Math.ceil(value.totalHits / pageSize);\n    const markup = renderImages(value.hits);\n    list.insertAdjacentHTML('beforeend', markup);\n\n    const lightbox = new SimpleLightbox('.gallery-link', {\n      captionsData: 'alt',\n    });\n    lightbox.refresh();\n  } catch (err) {\n    console.error('Error occurred while fetching images:', error);\n    iziToast.error({\n      backgroundColor: 'red',\n      icon: false,\n      progressBar: false,\n      close: false,\n      position: 'topRight',\n      message:\n        'Sorry, an error occurred while fetching images. Please try again!',\n    });\n  }\n  load.classList.remove('loader');\n  checkBtnStatus();\n  e.target.reset();\n}\n\nbtnLoad.addEventListener('click', handleLoad);\n\nasync function handleLoad(e) {\n  load.classList.add('loader');\n  page += 1;\n\n  try {\n    const value = await getImages(input, page);\n\n    if (page >= maxPage) {\n      iziToast.info({\n        title: `We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n      });\n    }\n    const markup = renderImages(value.hits);\n    list.insertAdjacentHTML('beforeend', markup);\n    myScroll();\n    const lightbox = new SimpleLightbox('.gallery-link', {\n      captionsData: 'alt',\n    });\n    lightbox.refresh();\n  } catch (err) {\n    console.error('Error occurred while fetching images:', error);\n    iziToast.error({\n      backgroundColor: 'red',\n      icon: false,\n      progressBar: false,\n      close: false,\n      position: 'topRight',\n      message:\n        'Sorry, an error occurred while fetching images. Please try again!',\n    });\n  }\n  load.classList.remove('loader');\n  checkBtnStatus();\n}\n\nfunction myScroll() {\n  const height = list.firstChild.getBoundingClientRect().height;\n  console.log(height);\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getImages","q","currentPage","url","params","axios","renderImages","imagesArr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","list","load","btnLoad","handleImages","showLoadMore","hideLoadMore","checkBtnStatus","page","maxPage","input","pageSize","e","iziToast","value","markup","SimpleLightbox","handleLoad","myScroll","height"],"mappings":"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"}